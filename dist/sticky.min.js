!function(){"use strict";var a=angular.module("sticky",[]);a.directive("sticky",["$window","$timeout",function(a,b){return{restrict:"A",scope:{disabled:"=disabledSticky",stickyOn:"="},link:function(d,e,f){function I(){H&&(y.on("scroll",K),x.on("resize",d.$apply.bind(d,S)),J(),d.$watch(T,U),d.$on("$destroy",R),H=!1)}function J(){q=d.getInitialDimensions(),E&&(e[0].getBoundingClientRect().height||(l=d.$watch(function(){return e.height()},function(b,c){b>0&&(q=d.getInitialDimensions(),F||l())})))}function L(b){var c=M(g,b);return 1===c.length?c[0]:a}function M(a,b){var e,c=[],d=b.parent();do{var f=d[0];if(1!==f.nodeType)break;if(f.tagName.toUpperCase()===a.toUpperCase())return d;e=d.parent(),d=e}while(0!==e.length);return c}function N(b){return"true"===b&&a.innerHeight-(e[0].offsetHeight+parseInt(G))<0}function O(a,b,c){var d="top",e=Math.abs(a-b),f=Math.abs(a-c);return e>f&&(d="bottom"),d}function P(a){i&&e.attr("style",i),k=!1,q.width=d.getInitialDimensions().width,z.removeClass(t),e.removeClass(r),e.addClass(s),"top"===a?(e.removeClass(u),e.css("z-index",10).css("width",q.width).css("top",q.top).css("position",q.position).css("left",q.cssLeft).css("margin-top",q.marginTop).css("height",q.height)):"bottom"===a&&D===!0&&(e.addClass(u),V(),e.css("z-index",10).css("width",q.width).css("top","").css("bottom",0).css("position","absolute").css("left",q.cssLeft).css("margin-top",q.marginTop).css("margin-bottom",q.marginBottom).css("height",q.height)),o&&a===C&&o.remove()}function Q(a){k=!0,b(function(){q.offsetWidth=e[0].offsetWidth},0),z.addClass(t),e.removeClass(s),e.removeClass(u),e.addClass(r),V(),e.css("z-index","10").css("width",e[0].offsetWidth+"px").css("position","fixed").css("left",e.css("left").replace("px","")+"px").css(C,G+X(w)+"px").css("margin-top",0),"bottom"===C&&e.css("margin-bottom",0)}function S(){P(C),K()}function V(){if(B){o&&o.remove(),o=angular.element("<div>");var a=e[0].offsetHeight,b=e[0].currentStyle||window.getComputedStyle(e[0]);a+=parseInt(b.marginTop,10),a+=parseInt(b.marginBottom,10),a+=parseInt(b.borderTopWidth,10),a+=parseInt(b.borderBottomWidth,10),o.css("height",e[0].offsetHeight+"px"),e.after(o)}}function W(){return!!(D&&Y()>j)}function X(a){var b=0;return a.getBoundingClientRect&&(b=a.getBoundingClientRect().top),b}function Y(){var a;return a="undefined"!=typeof w.scrollTop?w.scrollTop:"undefined"!=typeof w.pageYOffset?w.pageYOffset:document.documentElement.scrollTop}function Z(){var b;return b=y[0]instanceof HTMLElement?a.getComputedStyle(y[0],null).getPropertyValue("height").replace(/px;?/,""):a.innerHeight,parseInt(b)||0}function $(){var b=f.mediaQuery||!1,c=a.matchMedia;return b&&!(c("("+b+")").matches||c(b).matches)}function _(a,b){var f,c=a[0],d=window.getComputedStyle(c),e=d.display;return c.style.display="none",f=d[b],c.style.display=e,f}var l,m,n,o,p,q,g="sticky-scroll",h=e.css("position"),i=e.attr("style")||"",j=0,k=!1,r=f.stickyClass||"",s=f.unstickyClass||"",t=f.bodyClass||"",u=f.bottomClass||"",v=f.initStickyDelay||0,w=L(e),x=angular.element(a),y=angular.element(w),z=angular.element(document.body),A=d.$apply.bind(d,S),B="false"!==f.usePlaceholder,C="bottom"===f.anchor?"bottom":"top",D="true"===f.confine,E=void 0!==f.isStickyLayoutDeferred&&"true"===f.isStickyLayoutDeferred,F=void 0===f.isStickyLayoutWatched||"true"===f.isStickyLayoutWatched,G=f.offset?parseInt(f.offset.replace(/px;?/,"")):0,H=!0,K=function(){if(d.disabled===!0||$())return k&&P(),!1;var b,a=Y();b="top"===C?D===!0?a>p&&a<=j:a>p:a<=p;var c=O(a,p,j);!b||N(f.stickLimit)||k?!b&&k?P(c,a):D&&!b&&(n=X(e[0]),P(c,a)):Q(c)},R=function(){y.off("scroll",K),x.off("resize",A),A=null,z.removeClass(t),o&&o.remove()},T=function(){if(d.disabled===!0)return P();var a=X(e[0]);return 0===a?a:"top"===C?(n||a)-X(w)+Y():a-Z()+e[0].offsetHeight+Y()},U=function(a,b){var c=!!a,f=!b,g=a!==b||"undefined"==typeof p,h=!k&&!W();if(g&&h&&a>0&&c){p=a-G,c&&f&&d.updateStickyContentUpdateDimensions(e[0].offsetWidth,e[0].offsetHeight),D&&e.parent().css({position:"relative"});var i=e.parent()[0],l=parseInt(i.offsetHeight)-(B?0:e[0].offsetHeight),m=parseInt(e.css("margin-bottom").replace(/px;?/,""))||0,n=X(e[0]),o=X(i),q=X(w),r=n-q,s=o+l-n;j=r+s-e[0].offsetHeight-m-G+ +Y(),K()}};if(d.getElement=function(){return e},d.getScrollbar=function(){return w},d.getInitialCSS=function(){return q},d.getAnchor=function(){return C},d.isSticking=function(){return k},d.getOriginalInitialCSS=function(){return m},d.processUnStickElement=function(a){P(a)},d.processCheckIfShouldStick=function(){K()},d.getInitialDimensions=function(){return{zIndex:e.css("z-index"),top:e.css("top"),position:h,marginTop:e.css("margin-top"),marginBottom:e.css("margin-bottom"),cssLeft:_(e,"left"),width:e[0].offsetWidth,height:e.css("height")}},d.updateStickyContentUpdateDimensions=function(a,b){a&&b&&(I(),q.width=a+"px",q.height=b+"px")},"stickyOn"in d)var aa=d.$watch(function(){return d.stickyOn},function(a){a&&(m=d.getInitialDimensions(),I(),aa())});else b(function(){m=d.getInitialDimensions(),I()},v)},controller:["$scope","$window",function(a,b){this.resetLayout=function(c,d){function h(){"top"===g&&(e===b?b.scrollTo(0,0):e.scrollTop>0&&(e.scrollTop=0))}var e=a.getScrollbar(),f=a.getInitialCSS(),g=a.getAnchor();if(a.isSticking()&&(a.processUnStickElement(g),a.processCheckIfShouldStick()),a.getElement().css({width:"",height:"",position:"",top:"",zIndex:""}),f.position=a.getOriginalInitialCSS().position,delete f.offsetWidth,void 0===c&&void 0===d){var i=a.getElement()[0].getBoundingClientRect();c=i.width,d=i.height}a.updateStickyContentUpdateDimensions(c,d),h()},this.getScrollbar=function(){return a.getScrollbar()}}]}}]),window.matchMedia=window.matchMedia||function(){var a="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";return window.console&&console.warn&&console.warn(a),function(){return{matches:!0}}}()}();